<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chel-Love | –ì–ª–∞–≤–Ω–∞—è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <style>
        :root { --bg: #0f172a; --text: #ffffff; --glass: rgba(255, 255, 255, 0.03); --border: rgba(255, 255, 255, 0.1); }
        body.light-mode { --bg: #f1f5f9; --text: #0f172a; --glass: rgba(255, 255, 255, 0.7); --border: rgba(0,0,0,0.1); }
        body { background: var(--bg); color: var(--text); transition: 0.3s; font-family: 'Inter', sans-serif; min-height: 100vh; }
        .glass { background: var(--glass); backdrop-filter: blur(15px); border: 1px solid var(--border); }
        .gradient-btn { background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%); color: white; }
    </style>
</head>
<body class="flex flex-col overflow-x-hidden">
    <header class="glass sticky top-0 z-50 p-4 flex justify-between items-center px-6 md:px-12">
        <button onclick="toggleTheme()" class="p-2 rounded-full glass" id="themeBtn">üåô</button>
        <div class="text-xl md:text-2xl font-black tracking-widest uppercase">Chel<span class="text-blue-400">Love</span></div>
        <div id="nav"></div>
    </header>

    <main class="flex-1 flex flex-col items-center justify-center text-center p-6 relative">
        <div class="animate__animated animate__fadeInUp w-full max-w-4xl">
            <h1 class="text-4xl md:text-7xl font-black mb-6 tracking-tighter uppercase leading-tight">–ß–µ–ª—è–±–∏–Ω—Å–∫<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 text-5xl md:text-8xl">–ù–ê –°–í–Ø–ó–ò</span></h1>
            <p class="text-gray-400 text-lg md:text-xl mb-10 max-w-lg mx-auto text-balance">–ù–∞–π–¥–∏ —Å–≤–æ–∏—Ö –ª—é–¥–µ–π –≤ —Ä–æ–¥–Ω–æ–º –≥–æ—Ä–æ–¥–µ. –ë–µ–∑–æ–ø–∞—Å–Ω–æ, –±—ã—Å—Ç—Ä–æ, –ø–æ-–Ω–∞—à–µ–º—É.</p>
        </div>
    </main>

    <div id="authModal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-[100] p-4">
        <div class="glass p-8 md:p-10 rounded-[2rem] w-full max-w-md animate__animated animate__zoomIn">
            <h2 id="atitle" class="text-3xl font-bold mb-6 text-center">–í—Ö–æ–¥</h2>
            <div class="space-y-4">
                <input type="text" id="u" placeholder="–õ–æ–≥–∏–Ω" class="w-full bg-white/5 p-4 rounded-2xl outline-none border border-white/10 text-white">
                <input type="password" id="p" placeholder="–ü–∞—Ä–æ–ª—å (–æ—Ç 8 —Å–∏–º–≤–æ–ª–æ–≤)" class="w-full bg-white/5 p-4 rounded-2xl outline-none border border-white/10 text-white">
                <button id="authBtn" class="w-full gradient-btn py-4 rounded-2xl font-bold text-lg mt-2 transition active:scale-95">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                <button id="modeBtn" class="w-full text-gray-500 text-sm">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                <button onclick="document.getElementById('authModal').classList.add('hidden')" class="w-full text-xs text-gray-600 uppercase tracking-widest mt-2">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCTIwDY2Kjzeo5c3X7gyy89mOhHs0RlJyw",
            authDomain: "chel-love.firebaseapp.com",
            databaseURL: "https://chel-love-default-rtdb.firebaseio.com",
            projectId: "chel-love",
            storageBucket: "chel-love.firebasestorage.app",
            messagingSenderId: "334954303228",
            appId: "1:334954303228:web:1d523948b0d3b0e8f25179"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        let isReg = false;

        window.toggleMode = () => {
            isReg = !isReg;
            document.getElementById('atitle').innerText = isReg ? '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è' : '–í—Ö–æ–¥';
            document.getElementById('modeBtn').innerText = isReg ? '–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏' : '–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';
        };

        window.toggleTheme = () => {
            const isLight = document.body.classList.toggle('light-mode');
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
            document.getElementById('themeBtn').innerText = isLight ? '‚òÄÔ∏è' : 'üåô';
        };

        document.getElementById('modeBtn').onclick = window.toggleMode;
        document.getElementById('authBtn').onclick = async () => {
            const user = document.getElementById('u').value.trim().toLowerCase();
            const pass = document.getElementById('p').value;
            if (!user || !pass) return alert("–ó–∞–ø–æ–ª–Ω–∏ –ø–æ–ª—è!");
            if (isReg && pass.length < 8) return alert("–ü–∞—Ä–æ–ª—å –æ—Ç 8 —Å–∏–º–≤–æ–ª–æ–≤!");

            const userRef = ref(db, 'users/' + user);
            const snapshot = await get(userRef);

            if (isReg) {
                if (snapshot.exists()) return alert("–õ–æ–≥–∏–Ω –∑–∞–Ω—è—Ç!");
                await set(userRef, { user, pass });
                alert("–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤–æ–π–¥–∏.");
                window.toggleMode();
            } else {
                if (snapshot.exists() && snapshot.val().pass === pass) {
                    localStorage.setItem('currentUser', JSON.stringify({ user: user }));
                    location.reload();
                } else alert("–ù–µ–≤–µ—Ä–Ω–æ!");
            }
        };

        const nav = document.getElementById('nav');
        const curr = localStorage.getItem('currentUser');
        if (curr) {
            nav.innerHTML = `<div class="flex gap-3"><a href="dating.html" class="gradient-btn px-5 py-2 rounded-xl font-bold text-sm">–õ–ï–ù–¢–ê</a><button onclick="localStorage.clear(); location.reload()" class="text-gray-500 text-xs">–í–´–•–û–î</button></div>`;
        } else {
            nav.innerHTML = `<button onclick="document.getElementById('authModal').classList.remove('hidden')" class="gradient-btn px-6 py-2 rounded-xl font-bold">–í–û–ô–¢–ò</button>`;
        }
        if (localStorage.getItem('theme') === 'light') { document.body.classList.add('light-mode'); document.getElementById('themeBtn').innerText = '‚òÄÔ∏è'; }
    </script>
</body>
</html>
