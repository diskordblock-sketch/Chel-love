<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–õ–µ–Ω—Ç–∞ | Chel-Love</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --bg: #0f172a; --text: #ffffff; --card: rgba(255, 255, 255, 0.05); --border: rgba(255, 255, 255, 0.1); }
        body.light-mode { --bg: #f1f5f9; --text: #0f172a; --card: #ffffff; --border: rgba(0,0,0,0.1); }
        body { background: var(--bg); color: var(--text); padding-bottom: 120px; transition: 0.3s; }
        .glass { background: var(--card); backdrop-filter: blur(10px); border: 1px solid var(--border); }
    </style>
</head>
<body>
    <header class="p-6 flex justify-between items-center border-b border-white/10 glass sticky top-0 z-50">
        <a href="index.html" class="font-bold hover:text-blue-400 transition">‚Üê –ù–∞–∑–∞–¥</a>
        <div class="text-blue-400 font-bold text-xl uppercase tracking-widest">–ß–µ–ª—è–±–∏–Ω—Å–∫ Live</div>
        <button onclick="toggleTheme()" class="p-2 rounded-full glass" id="themeBtn">üåô</button>
    </header>

    <main id="feed" class="max-w-md mx-auto p-4 space-y-8 mt-6"></main>

    <button onclick="document.getElementById('m').classList.remove('hidden')" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-blue-600 text-white px-10 py-4 rounded-full font-bold shadow-2xl hover:scale-105 transition">+ –°–æ–∑–¥–∞—Ç—å –∞–Ω–∫–µ—Ç—É</button>

    <div id="m" class="hidden fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4">
        <div class="bg-slate-900 p-8 rounded-3xl w-full max-w-sm border border-white/10 shadow-2xl">
            <h2 class="text-2xl font-bold mb-6 text-blue-400">–ù–æ–≤–∞—è –∞–Ω–∫–µ—Ç–∞</h2>
            <div class="space-y-3">
                <input type="text" id="postName" placeholder="–¢–≤–æ–µ –ò–º—è" class="w-full bg-white/5 p-3 rounded-xl outline-none border border-white/10 text-white">
                <input type="number" id="age" placeholder="–í–æ–∑—Ä–∞—Å—Ç" class="w-full bg-white/5 p-3 rounded-xl outline-none border border-white/10 text-white">
                <input type="text" id="photo" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ (URL)" class="w-full bg-white/5 p-3 rounded-xl outline-none border border-white/10 text-white">
                <input type="text" id="tg" placeholder="Telegram (–±–µ–∑ @)" class="w-full bg-white/5 p-3 rounded-xl outline-none border border-white/10 text-white">
                <textarea id="bio" placeholder="–ü–∞—Ä—É —Å–ª–æ–≤ –æ —Å–µ–±–µ..." class="w-full bg-white/5 p-3 rounded-xl outline-none border border-white/10 text-white h-24"></textarea>
            </div>
            <button id="sendBtn" class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold mt-6">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
            <button onclick="document.getElementById('m').classList.add('hidden')" class="w-full mt-4 text-gray-500">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCTIwDY2Kjzeo5c3X7gyy89mOhHs0RlJyw",
            authDomain: "chel-love.firebaseapp.com",
            databaseURL: "https://chel-love-default-rtdb.firebaseio.com",
            projectId: "chel-love",
            appId: "1:334954303228:web:1d523948b0d3b0e8f25179"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        window.toggleTheme = () => {
            const isLight = document.body.classList.toggle('light-mode');
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
            document.getElementById('themeBtn').innerText = isLight ? '‚òÄÔ∏è' : 'üåô';
        };

        const feed = document.getElementById('feed');
        onValue(ref(db, 'posts'), (snapshot) => {
            const data = snapshot.val();
            if (!data) return feed.innerHTML = "–ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç...";
            
            const posts = Object.values(data).reverse();
            feed.innerHTML = posts.map(p => `
                <div class="glass rounded-[2.5rem] overflow-hidden shadow-2xl transition-all">
                    <img src="${p.photo || 'https://via.placeholder.com/400'}" class="w-full h-80 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold">${p.name}, ${p.age}</h3>
                        <p class="text-gray-400 my-4">${p.text}</p>
                        <a href="https://t.me/${p.contact}" target="_blank" class="block w-full bg-blue-600 text-white py-3 rounded-xl font-bold text-center">‚úàÔ∏è –ö–æ–Ω—Ç–∞–∫—Ç</a>
                    </div>
                </div>
            `).join('');
        });

        document.getElementById('sendBtn').onclick = async () => {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            if(!user) return alert("–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏!");
            
            const name = document.getElementById('postName').value;
            const age = document.getElementById('age').value;
            const photo = document.getElementById('photo').value;
            const contact = document.getElementById('tg').value;
            const text = document.getElementById('bio').value;

            if(!name || !age || !contact) return alert("–ó–∞–ø–æ–ª–Ω–∏ –ø–æ–ª—è!");

            await push(ref(db, 'posts'), { name, age, photo, contact, text });
            document.getElementById('m').classList.add('hidden');
        };

        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-mode');
            document.getElementById('themeBtn').innerText = '‚òÄÔ∏è';
        }
    </script>
</body>
</html>